# ============================================
# Grist Railway Environment Variables
# ============================================
# Copy these to Railway Dashboard → Service → Variables

# ============================================
# Server Configuration
# ============================================
PORT=8484
GRIST_HOST=0.0.0.0
GRIST_SINGLE_PORT=true
GRIST_SERVE_SAME_ORIGIN=true

# ============================================
# Organization (CHANGE THIS!)
# ============================================
GRIST_ORG_IN_PATH=true
GRIST_SINGLE_ORG=mycompany
# ^ IMPORTANT: Change "mycompany" to your actual SaaS name

# ============================================
# Security (GENERATE NEW SECRET!)
# ============================================
GRIST_SESSION_SECRET=REPLACE_WITH_OUTPUT_OF_openssl_rand_hex_32
# ^ Generate with: openssl rand -hex 32

GRIST_FORCE_LOGIN=true
GRIST_ANON_PLAYGROUND=false

# ============================================
# Storage & Data
# ============================================
GRIST_DATA_DIR=/persist/docs
GRIST_INST_DIR=/persist

# ============================================
# Database - SQLite (Simple)
# ============================================
TYPEORM_TYPE=sqlite
TYPEORM_DATABASE=/persist/home.sqlite3

# ============================================
# Database - PostgreSQL (Production)
# ============================================
# Uncomment these and comment out SQLite above if using Postgres:
# TYPEORM_TYPE=postgres
# TYPEORM_HOST=${PGHOST}
# TYPEORM_PORT=${PGPORT}
# TYPEORM_DATABASE=${PGDATABASE}
# TYPEORM_USERNAME=${PGUSER}
# TYPEORM_PASSWORD=${PGPASSWORD}

# ============================================
# Authentication - Forward Auth
# ============================================
GRIST_FORWARD_AUTH_HEADER=X-Forwarded-User
GRIST_FORWARD_AUTH_LOGIN_PATH=/auth/login
GRIST_FORWARD_AUTH_LOGOUT_PATH=/auth/logout
GRIST_IGNORE_SESSION=false

# ============================================
# UI Customization
# ============================================
GRIST_HIDE_UI_ELEMENTS=billing,templates,tutorials,supportGrist
GRIST_TELEMETRY_LEVEL=off
GRIST_PAGE_TITLE_SUFFIX=" - Your SaaS Name"

# ============================================
# Sandboxing
# ============================================
GRIST_SANDBOX_FLAVOR=unsandboxed

# ============================================
# Limits & Performance
# ============================================
GRIST_MAX_UPLOAD_IMPORT_MB=50
GRIST_MAX_UPLOAD_ATTACHMENT_MB=50
GRIST_MAX_PARALLEL_REQUESTS_PER_DOC=10
NODE_ENV=production

# ============================================
# Optional: S3-Compatible Storage (Supabase)
# ============================================
# Uncomment if using external storage:
# GRIST_DOCS_S3_BUCKET=grist-documents
# GRIST_DOCS_S3_PREFIX=docs/
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_supabase_s3_key
# AWS_SECRET_ACCESS_KEY=your_supabase_s3_secret
# AWS_S3_ENDPOINT=https://your-project.supabase.co/storage/v1/s3

# ============================================
# Optional: Backups
# ============================================
# GRIST_SNAPSHOT_KEEP=10
# GRIST_BACKUP_DELAY_SECS=60

